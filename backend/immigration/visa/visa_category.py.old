from django.db import models

from immigration import constants
from immigration.models import LifeCycleModel
from immigration.serializer import LifeCycleAwareSerializer, HumanReadableIdAwareSerializer
from immigration.views import LifeCycleViewSet


class VisaCategory(LifeCycleModel):
    name = models.CharField(max_length=100)

    def __str__(self):
        return self.name


class VisaCategorySerializer(LifeCycleAwareSerializer, HumanReadableIdAwareSerializer):
    class Meta:
        model = VisaCategory
        fields = '__all__'

    def get_entity_initial(self):
        return constants.IdPrefix.VISA_CATEGORY


class VisaCategoryViewSet(LifeCycleViewSet):
    queryset = VisaCategory.objects.all()
    serializer_class = VisaCategorySerializer
